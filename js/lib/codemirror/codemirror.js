define(function(){"use strict";function e(l,u){function f(e){nr.onDragEvent&&nr.onDragEvent(li,T(e))||N(e)}function g(e){return e>=0&&e<Tr.size}function v(e){return C(Tr,e)}function M(e,t){Ir=!0;for(var n=t-e.height,r=e;r;r=r.parent)r.height+=n}function L(e,t){return e.styles||e.highlight(Sr,e.stateAfter=Zn(b(e)),nr.tabSize),e.getContent(nr.tabSize,t,nr.lineWrapping)}function O(e){var t={line:0,ch:0};Wt(t,{line:Tr.size-1,ch:v(Tr.size-1).text.length},kt(e),t,t),Dr=!0}function X(e){var t=[];return Tr.iter(0,Tr.size,function(e){t.push(e.text)}),t.join(e||"\n")}function Q(){Math.abs(sr.scrollTop-Ur)>1&&(Ur=xr.scrollTop=sr.scrollTop,en([]))}function et(){nr.fixedGutter&&vr.style.left!=xr.scrollLeft+"px"&&(vr.style.left=xr.scrollLeft+"px"),Math.abs(xr.scrollTop-Ur)>1&&(Ur=xr.scrollTop,sr.scrollTop!=Ur&&(sr.scrollTop=Ur),en([])),nr.onScroll&&nr.onScroll(li)}function rt(e){function t(t){ct&&(xr.draggable=!1),Wr=!1,h(),d(),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(A(t),fn(l.line,l.ch,!0),jt())}function n(e){if("single"==s)an(l,e);else if("double"==s){var t=mn(e);F(e,p)?an(t.from,g):an(p,t.to)}else"triple"==s&&(F(e,p)?an(g,hn({line:e.line,ch:0})):an(p,hn({line:e.line+1,ch:0})))}function r(e){var t=Gn(e,!0);if(t&&!U(t,c)){kr||Nt(),c=t,n(t),Dr=!1;var i=Qt();(t.line>=i.to||t.line<i.from)&&(f=setTimeout(er(function(){r(e)}),150))}}function i(e){clearTimeout(f);var t=Gn(e);t&&n(t),A(e),jt(),Dr=!0,v(),h()}ln(D(e,"shiftKey"));for(var o=E(e);o!=Cr;o=o.parentNode)if(o.parentNode==yr&&o!=mr)return;for(var o=E(e);o!=Cr;o=o.parentNode)if(o.parentNode==gr)return nr.onGutterClick&&nr.onGutterClick(li,Z(gr.childNodes,o)+$r,e),A(e);var l=Gn(e);switch(W(e)){case 3:return void(lt&&Yn(e));case 2:return l&&fn(l.line,l.ch,!0),setTimeout(jt,20),void A(e)}if(!l)return void(E(e)==xr&&A(e));kr||Nt();var a=+new Date,s="single";if(Er&&Er.time>a-400&&U(Er.pos,l))s="triple",A(e),setTimeout(jt,20),yn(l.line);else if(Nr&&Nr.time>a-400&&U(Nr.pos,l)){s="double",Er={time:a,pos:l},A(e);var u=mn(l);an(u.from,u.to)}else Nr={time:a,pos:l};var f,c=l;if(nr.dragDrop&&xt&&!nr.readOnly&&!U(Kr.from,Kr.to)&&!F(l,Kr.from)&&!F(Kr.to,l)&&"single"==s){ct&&(xr.draggable=!0);var h=z(document,"mouseup",er(t),!0),d=z(xr,"drop",er(t),!0);return Wr=!0,void(xr.dragDrop&&xr.dragDrop())}A(e),"single"==s&&fn(l.line,l.ch,!0);var p=Kr.from,g=Kr.to,v=z(document,"mousemove",er(function(e){clearTimeout(f),A(e),at||W(e)?r(e):i(e)}),!0),h=z(document,"mouseup",er(i),!0)}function ht(e){for(var t=E(e);t!=Cr;t=t.parentNode)if(t.parentNode==gr)return A(e);A(e)}function pt(e){if(!nr.onDragEvent||!nr.onDragEvent(li,T(e))){A(e);var t=Gn(e,!0),n=e.dataTransfer.files;if(t&&!nr.readOnly)if(n&&n.length&&window.FileReader&&window.File)for(var r=n.length,i=Array(r),o=0,l=function(e,n){var l=new FileReader;l.onload=function(){i[n]=l.result,++o==r&&(t=hn(t),er(function(){var e=Pt(i.join(""),t,t);an(t,e)})())},l.readAsText(e)},a=0;r>a;++a)l(n[a],a);else{if(Wr&&!F(t,Kr.from)&&!F(Kr.to,t))return;try{var i=e.dataTransfer.getData("Text");i&&tr(function(){var e=Kr.from,n=Kr.to;an(t,t),Wr&&Pt("",e,n),Kt(i),jt()})}catch(e){}}}}function mt(e){var t=Vt();e.dataTransfer.setData("Text",t),e.dataTransfer.setDragImage&&e.dataTransfer.setDragImage(G("img"),0,0)}function Ct(e,t){if("string"==typeof e&&(e=it[e],!e))return!1;var n=Lr;try{nr.readOnly&&(Vr=!0),t&&(Lr=null),e(li)}catch(r){if(r!=yt)throw r;return!1}finally{Lr=n,Vr=!1}return!0}function bt(e){function i(){f=!0}var o=t(nr.keyMap),l=o.auto;clearTimeout(ii),l&&!r(e)&&(ii=setTimeout(function(){t(nr.keyMap)==o&&(nr.keyMap=l.call?l.call(null,li):l)},50));var a=Mt[D(e,"keyCode")],s=!1,u=dt&&q;if(null==a||e.altGraphKey)return!1;D(e,"altKey")&&(a="Alt-"+a),D(e,u?"metaKey":"ctrlKey")&&(a="Ctrl-"+a),D(e,u?"ctrlKey":"metaKey")&&(a="Cmd-"+a);var f=!1;return s=D(e,"shiftKey")?n("Shift-"+a,nr.extraKeys,nr.keyMap,function(e){return Ct(e,!0)},i)||n(a,nr.extraKeys,nr.keyMap,function(e){return"string"==typeof e&&/^go[A-Z]/.test(e)?Ct(e):void 0},i):n(a,nr.extraKeys,nr.keyMap,Ct,i),f&&(s=!1),s&&(A(e),$n(),ut&&(e.oldKeyCode=e.keyCode,e.keyCode=0)),s}function St(e,t){var r=n("'"+t+"'",nr.extraKeys,nr.keyMap,function(e){return Ct(e,!0)});return r&&(A(e),$n()),r}function Tt(e){if(kr||Nt(),at&&27==e.keyCode&&(e.returnValue=!1),qr&&$t()&&(qr=!1),!nr.onKeyEvent||!nr.onKeyEvent(li,T(e))){var t=D(e,"keyCode");ln(16==t||D(e,"shiftKey"));var n=bt(e);dt&&(ai=n?t:null,!n&&88==t&&D(e,q?"metaKey":"ctrlKey")&&Kt(""))}}function At(e){if(qr&&$t(),!nr.onKeyEvent||!nr.onKeyEvent(li,T(e))){var t=D(e,"keyCode"),n=D(e,"charCode");if(dt&&t==ai)return ai=null,void A(e);if(!(dt&&(!e.which||e.which<10)||gt)||!bt(e)){var r=String.fromCharCode(null==n?t:n);nr.electricChars&&Sr.electricChars&&nr.smartIndent&&!nr.readOnly&&Sr.electricChars.indexOf(r)>-1&&setTimeout(er(function(){Cn(Kr.to.line,"smart")}),75),St(e,r)||Yt()}}}function Lt(e){nr.onKeyEvent&&nr.onKeyEvent(li,T(e))||(16==D(e,"keyCode")&&(Lr=null),oi.change&&oi.change.forEach(function(e){e(li,X())}))}function Nt(){"nocursor"!=nr.readOnly&&(kr||(nr.onFocus&&nr.onFocus(li),kr=!0,-1==xr.className.search(/\bCodeMirror-focused\b/)&&(xr.className+=" CodeMirror-focused")),Gt(),$n(),oi.focus&&oi.focus.forEach(function(e){e(li,X())}))}function Et(){kr&&(nr.onBlur&&nr.onBlur(li),kr=!1,Pr&&er(function(){Pr&&(Pr(),Pr=null)})(),xr.className=xr.className.replace(" CodeMirror-focused","")),clearInterval(br),setTimeout(function(){kr||(Lr=null)},150)}function Wt(e,t,n,r,i){if(!Vr){var o=[];if(Tr.iter(e.line,t.line+1,function(e){o.push(p(e.text,e.markedSpans))}),ei)for(ei.addChange(e.line,n.length,o);ei.done.length>nr.undoDepth;)ei.done.shift();var l=c(d(o[0]),d(P(o)),e.ch,t.ch,n);Ot(e,t,l,r,i)}}function Dt(e,t){if(e.length){for(var n=e.pop(),r=[],i=n.length-1;i>=0;i-=1){var o=n[i],l=[],a=o.start+o.added;Tr.iter(o.start,a,function(e){l.push(p(e.text,e.markedSpans))}),r.push({start:o.start,added:o.old.length,old:l});var s={line:o.start+o.old.length-1,ch:j(h(P(l)),h(P(o.old)))};Ot({line:o.start,ch:0},{line:a-1,ch:v(a-1).text.length},o.old,s,s)}Dr=!0,t.push(r)}}function zt(){Dt(ei.done,ei.undone)}function Ht(){Dt(ei.undone,ei.done)}function Ot(e,t,n,r,i){function o(e){return e<=Math.min(t.line,t.line+C)?e:e+C}if(!Vr){var l=!1,a=Zr.text.length;nr.lineWrapping||Tr.iter(e.line,t.line+1,function(e){return e.hidden||e.text.length!=a?void 0:(l=!0,!0)}),(e.line!=t.line||n.length>1)&&(Ir=!0);var s=t.line-e.line,u=v(e.line),f=v(t.line),c=P(n);if(0==e.ch&&0==t.ch&&""==h(c)){for(var p=[],g=0,y=n.length-1;y>g;++g)p.push(new m(h(n[g]),d(n[g])));f.update(f.text,d(c)),s&&Tr.remove(e.line,s,Br),p.length&&Tr.insert(e.line,p)}else if(u==f)if(1==n.length)u.update(u.text.slice(0,e.ch)+h(n[0])+u.text.slice(t.ch),d(n[0]));else{for(var p=[],g=1,y=n.length-1;y>g;++g)p.push(new m(h(n[g]),d(n[g])));p.push(new m(h(c)+u.text.slice(t.ch),d(c))),u.update(u.text.slice(0,e.ch)+h(n[0]),d(n[0])),Tr.insert(e.line+1,p)}else if(1==n.length)u.update(u.text.slice(0,e.ch)+h(n[0])+f.text.slice(t.ch),d(n[0])),Tr.remove(e.line+1,s,Br);else{var p=[];u.update(u.text.slice(0,e.ch)+h(n[0]),d(n[0])),f.update(h(c)+f.text.slice(t.ch),d(c));for(var g=1,y=n.length-1;y>g;++g)p.push(new m(h(n[g]),d(n[g])));s>1&&Tr.remove(e.line+1,s-1,Br),Tr.insert(e.line+1,p)}if(nr.lineWrapping){var x=Math.max(5,xr.clientWidth/Un()-3);Tr.iter(e.line,e.line+n.length,function(e){if(!e.hidden){var t=Math.ceil(e.text.length/x)||1;t!=e.height&&M(e,t)}})}else Tr.iter(e.line,e.line+n.length,function(e){var t=e.text;!e.hidden&&t.length>a&&(Zr=e,a=t.length,Jr=!0,l=!1)}),l&&(_r=!0);Ar=Math.min(Ar,e.line),Jn(400);var C=n.length-s-1;if(Hr.push({from:e.line,to:t.line+1,diff:C}),nr.onChange){for(var g=0;g<n.length;++g)"string"!=typeof n[g]&&(n[g]=n[g].text);var b={from:e,to:t,text:n};if(Or){for(var S=Or;S.next;S=S.next);S.next=b}else Or=b}sn(hn(r),hn(i),o(Kr.from.line),o(Kr.to.line))}}function Rt(){var e=Tr.height*Kn()+2*Fn();return.99*e>xr.offsetHeight?e:!1}function It(e){var t=Rt();sr.style.display=t?"block":"none",t?(ar.style.height=yr.style.minHeight=t+"px",sr.style.height=xr.clientHeight+"px",null!=e&&(sr.scrollTop=xr.scrollTop=e,ct&&setTimeout(function(){sr.scrollTop==e&&(sr.scrollTop=e+(e?-1:1),sr.scrollTop=e)},0))):yr.style.minHeight="",mr.style.top=Yr*Kn()+"px"}function Bt(){Zr=v(0),Jr=!0;var e=Zr.text.length;Tr.iter(1,Tr.size,function(t){var n=t.text;!t.hidden&&n.length>e&&(e=n.length,Zr=t)}),_r=!1}function Pt(e,t,n){function r(r){if(F(r,t))return r;if(!F(n,r))return i;var o=r.line+e.length-(n.line-t.line)-1,l=r.ch;return r.line==n.line&&(l+=P(e).length-(n.ch-(n.line==t.line?t.ch:0))),{line:o,ch:l}}t=hn(t),n=n?hn(n):t,e=kt(e);var i;return Ut(e,t,n,function(e){return i=e,{from:r(Kr.from),to:r(Kr.to)}}),i}function Kt(e,t){Ut(kt(e),Kr.from,Kr.to,function(e){return"end"==t?{from:e,to:e}:"start"==t?{from:Kr.from,to:Kr.from}:{from:Kr.from,to:e}})}function Ut(e,t,n,r){var i=1==e.length?e[0].length+t.ch:P(e).length,o=r({line:t.line+e.length-1,ch:i});Wt(t,n,e,o.from,o.to)}function Ft(e,t,n){var r=e.line,i=t.line;if(r==i)return v(r).text.slice(e.ch,t.ch);var o=[v(r).text.slice(e.ch)];return Tr.iter(r+1,i,function(e){o.push(e.text)}),o.push(v(i).text.slice(0,t.ch)),o.join(n||"\n")}function Vt(e){return Ft(Kr.from,Kr.to,e)}function Gt(){qr||wr.set(nr.pollInterval,function(){$t(),kr&&Gt()})}function Yt(){function e(){var n=$t();n||t?(qr=!1,Gt()):(t=!0,wr.set(60,e))}var t=!1;qr=!0,wr.set(20,e)}function $t(){if(!kr||wt(or)||nr.readOnly)return!1;var e=or.value;if(e==si)return!1;vi||qn(),Lr=null;for(var t=0,n=Math.min(si.length,e.length);n>t&&si[t]==e[t];)++t;return t<si.length?Kr.from={line:Kr.from.line,ch:Kr.from.ch-(si.length-t)}:Fr&&U(Kr.from,Kr.to)&&!Gr&&(Kr.to={line:Kr.to.line,ch:Math.min(v(Kr.to.line).text.length,Kr.to.ch+(e.length-t))}),Kt(e.slice(t),"end"),e.length>1e3?or.value=si="":si=e,vi||Qn(),Gr=!1,!0}function Xt(e){U(Kr.from,Kr.to)?e&&(si=or.value=""):(si="",or.value=Vt(),kr&&K(or))}function jt(){"nocursor"!=nr.readOnly&&or.focus()}function Zt(){var e=_t();if(Jt(e.x,e.y,e.x,e.yBot),kr){var t=yr.getBoundingClientRect(),n=null;if(e.y+t.top<0?n=!0:e.y+t.top+Kn()>(window.innerHeight||document.documentElement.clientHeight)&&(n=!1),null!=n){var r="none"==cr.style.display;r&&(cr.style.display="",cr.style.left=e.x+"px",cr.style.top=e.y-Yr+"px"),cr.scrollIntoView(n),r&&(cr.style.display="none")}}}function _t(){var e=In(Kr.inverted?Kr.from:Kr.to),t=nr.lineWrapping?Math.min(e.x,pr.offsetWidth):e.x;return{x:t,y:e.y,yBot:e.yBot}}function Jt(e,t,n,r){var i=qt(e,t,n,r);null!=i.scrollLeft&&(xr.scrollLeft=i.scrollLeft),null!=i.scrollTop&&(sr.scrollTop=xr.scrollTop=i.scrollTop)}function qt(e,t,n,r){var i=Vn(),o=Fn();t+=o,r+=o,e+=i,n+=i;var l=xr.clientHeight,a=sr.scrollTop,s={},u=Rt()||1/0,f=o+10>t,c=r+o>u-10;a>t?s.scrollTop=f?0:Math.max(0,t):r>a+l&&(s.scrollTop=(c?u:r)-l);var h=xr.clientWidth,d=xr.scrollLeft,p=nr.fixedGutter?vr.clientWidth:0,g=p+i+10>e;return d+p>e||g?(g&&(e=0),s.scrollLeft=Math.max(0,e-10-p)):n>h+d-3&&(s.scrollLeft=n+10-h),s}function Qt(e){var t=Kn(),n=(null!=e?e:sr.scrollTop)-Fn(),r=Math.max(0,Math.floor(n/t)),i=Math.ceil((n+xr.clientHeight)/t);return{from:S(Tr,r),to:S(Tr,i)}}function en(e,t,n){function r(){var e=ur.firstChild,t=!1;return Tr.iter($r,Xr,function(n){if(e){if(!n.hidden){var r=Math.round(e.offsetHeight/c)||1;n.height!=r&&(M(n,r),Ir=t=!0)}e=e.nextSibling}}),t}if(!xr.clientWidth)return void($r=Xr=Yr=0);var i=Qt(n);if(e!==!0&&0==e.length&&i.from>$r&&i.to<Xr)return void It(n);var o=Math.max(i.from-100,0),l=Math.min(Tr.size,i.to+100);o>$r&&20>o-$r&&(o=$r),Xr>l&&20>Xr-l&&(l=Math.min(Tr.size,Xr));for(var a=e===!0?[]:tn([{from:$r,to:Xr,domStart:0}],e),s=0,u=0;u<a.length;++u){var f=a[u];f.from<o&&(f.domStart+=o-f.from,f.from=o),f.to>l&&(f.to=l),f.from>=f.to?a.splice(u--,1):s+=f.to-f.from}if(s==l-o&&o==$r&&l==Xr)return void It(n);a.sort(function(e,t){return e.domStart-t.domStart});var c=Kn(),h=vr.style.display;ur.style.display="none",nn(o,l,a),ur.style.display=vr.style.display="";var d=o!=$r||l!=Xr||jr!=xr.clientHeight+c;if(d&&(jr=xr.clientHeight+c),(o!=$r||l!=Xr&&nr.onViewportChange)&&setTimeout(function(){nr.onViewportChange&&nr.onViewportChange(li,o,l)}),$r=o,Xr=l,Yr=k(Tr,o),Jn(100),ur.childNodes.length!=Xr-$r)throw new Error("BAD PATCH! "+JSON.stringify(a)+" size="+(Xr-$r)+" nodes="+ur.childNodes.length);return nr.lineWrapping&&r(),vr.style.display=h,(d||Ir)&&rn()&&nr.lineWrapping&&r()&&rn(),It(n),on(),!t&&nr.onUpdate&&nr.onUpdate(li),!0}function tn(e,t){for(var n=0,r=t.length||0;r>n;++n){for(var i=t[n],o=[],l=i.diff||0,a=0,s=e.length;s>a;++a){var u=e[a];i.to<=u.from&&i.diff?o.push({from:u.from+l,to:u.to+l,domStart:u.domStart}):i.to<=u.from||i.from>=u.to?o.push(u):(i.from>u.from&&o.push({from:u.from,to:i.from,domStart:u.domStart}),i.to<u.to&&o.push({from:i.to+l,to:u.to+l,domStart:u.domStart+(i.to-u.from)}))}e=o}return e}function nn(e,t,n){function r(e){var t=e.nextSibling;return e.parentNode.removeChild(e),t}if(n.length){for(var i=0,o=ur.firstChild,l=0;l<n.length;++l){for(var a=n[l];a.domStart>i;)o=r(o),i++;for(var s=0,u=a.to-a.from;u>s;++s)o=o.nextSibling,i++}for(;o;)o=r(o)}else Y(ur);var f=n.shift(),o=ur.firstChild,s=e;Tr.iter(e,t,function(e){if(f&&f.to==s&&(f=n.shift()),!f||f.from>s){if(e.hidden)var t=G("pre");else{var t=L(e);if(e.className&&(t.className=e.className),e.bgClassName){var r=G("pre"," ",e.bgClassName,"position: absolute; left: 0; right: 0; top: 0; bottom: 0; z-index: -2");t=G("div",[r,t],null,"position: relative")}}ur.insertBefore(t,o)}else o=o.nextSibling;++s})}function rn(){if(nr.gutter||nr.lineNumbers){var e=mr.offsetHeight,t=xr.clientHeight;vr.style.height=(2>e-t?t:e)+"px";var n,r=document.createDocumentFragment(),i=$r;if(Tr.iter($r,Math.max(Xr,$r+1),function(e){if(e.hidden)r.appendChild(G("pre"));else{var t=e.gutterMarker,o=nr.lineNumbers?nr.lineNumberFormatter(i+nr.firstLineNumber):null;t&&t.text?o=t.text.replace("%N%",null!=o?o:""):null==o&&(o=" ");var l=r.appendChild(G("pre",null,t&&t.style));l.innerHTML=o;for(var a=1;a<e.height;++a)l.appendChild(G("br")),l.appendChild(document.createTextNode(" "));t||(n=i)}++i}),vr.style.display="none",$(gr,r),null!=n&&nr.lineNumbers){for(var o=gr.childNodes[n-$r],l=String(Tr.size).length,a=I(o.firstChild),s="";a.length+s.length<l;)s+=" ";s&&o.insertBefore(document.createTextNode(s),o.firstChild)}vr.style.display="";var u=Math.abs((parseInt(pr.style.marginLeft)||0)-vr.offsetWidth)>2;return pr.style.marginLeft=vr.offsetWidth+"px",Ir=!1,u}}function on(){var e=U(Kr.from,Kr.to),t=In(Kr.from,!0),n=e?t:In(Kr.to,!0),r=Kr.inverted?t:n,i=Kn(),o=R(Cr),l=R(ur);if(lr.style.top=Math.max(0,Math.min(xr.offsetHeight,r.y+l.top-o.top))+"px",lr.style.left=Math.max(0,Math.min(xr.offsetWidth,r.x+l.left-o.left))+"px",e)cr.style.top=r.y+"px",cr.style.left=(nr.lineWrapping?Math.min(r.x,pr.offsetWidth):r.x)+"px",cr.style.display="",fr.style.display="none";else{var a=t.y==n.y,s=document.createDocumentFragment(),u=pr.clientWidth||pr.offsetWidth,f=pr.clientHeight||pr.offsetHeight,c=function(e,t,n,r){var i=ft?"width: "+(n?u-n-e:u)+"px":"right: "+n+"px";s.appendChild(G("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; "+i+"; height: "+r+"px"))};if(Kr.from.ch&&t.y>=0){var h=a?u-n.x:0;c(t.x,t.y,h,i)}var d=Math.max(0,t.y+(Kr.from.ch?i:0)),p=Math.min(n.y,f)-d;p>.2*i&&c(0,d,0,p),a&&Kr.from.ch||!(n.y<f-.5*i)||c(0,n.y,u-n.x,i),$(fr,s),cr.style.display="none",fr.style.display=""}}function ln(e){Lr=e?Lr||(Kr.inverted?Kr.to:Kr.from):null}function an(e,t){var n=Lr&&hn(Lr);n&&(F(n,e)?e=n:F(t,n)&&(t=n)),sn(e,t),zr=!0}function sn(e,t,n,r){if(Qr=null,null==n&&(n=Kr.from.line,r=Kr.to.line),!U(Kr.from,e)||!U(Kr.to,t)){if(F(t,e)){var i=t;t=e,e=i}if(e.line!=n){var o=un(e,n,Kr.from.ch);o?e=o:Hn(e.line,!1)}if(t.line!=r&&(t=un(t,r,Kr.to.ch)),U(e,t)?Kr.inverted=!1:U(e,Kr.to)?Kr.inverted=!1:U(t,Kr.from)&&(Kr.inverted=!0),nr.autoClearEmptyLines&&U(Kr.from,Kr.to)){var l=Kr.inverted?e:t;if(l.line!=Kr.from.line&&Kr.from.line<Tr.size){var a=v(Kr.from.line);/^\s+$/.test(a.text)&&setTimeout(er(function(){if(a.parent&&/^\s+$/.test(a.text)){var e=b(a);Pt("",{line:e,ch:0},{line:e,ch:a.text.length})}},10))}}Kr.from=e,Kr.to=t,Rr=!0}}function un(e,t,n){function r(t){for(var r=e.line+t,i=1==t?Tr.size:-1;r!=i;){var l=v(r);if(!l.hidden){var a=e.ch;return(o||a>n||a>l.text.length)&&(a=l.text.length),{line:r,ch:a}}r+=t}}var i=v(e.line),o=e.ch==i.text.length&&e.ch!=n;return i.hidden?e.line>=t?r(1)||r(-1):r(-1)||r(1):e}function fn(e,t,n){var r=hn({line:e,ch:t||0});(n?an:sn)(r,r)}function cn(e){return Math.max(0,Math.min(e,Tr.size-1))}function hn(e){if(e.line<0)return{line:0,ch:0};if(e.line>=Tr.size)return{line:Tr.size-1,ch:v(Tr.size-1).text.length};var t=e.ch,n=v(e.line).text.length;return null==t||t>n?{line:e.line,ch:n}:0>t?{line:e.line,ch:0}:e}function dn(e,t){function n(){for(var t=o+e,n=0>e?-1:Tr.size;t!=n;t+=e){var r=v(t);if(!r.hidden)return o=t,a=r,!0}}function r(t){if(l==(0>e?0:a.text.length)){if(t||!n())return!1;l=0>e?a.text.length:0}else l+=e;return!0}var i=Kr.inverted?Kr.from:Kr.to,o=i.line,l=i.ch,a=v(o);if("char"==t)r();else if("column"==t)r(!0);else if("word"==t)for(var s=!1;!(0>e)||r();){if(_(a.text.charAt(l)))s=!0;else if(s){0>e&&(e=1,r());break}if(e>0&&!r())break}return{line:o,ch:l}}function pn(e,t){var n=0>e?Kr.from:Kr.to;(Lr||U(Kr.from,Kr.to))&&(n=dn(e,t)),fn(n.line,n.ch,!0)}function gn(e,t){U(Kr.from,Kr.to)?0>e?Pt("",dn(e,t),Kr.to):Pt("",Kr.from,dn(e,t)):Pt("",Kr.from,Kr.to),zr=!0}function vn(e,t){var n=In(Kr.inverted?Kr.from:Kr.to,!0);if(null!=Qr&&(n.x=Qr),"page"==t)var r=Math.min(xr.clientHeight,window.innerHeight||document.documentElement.clientHeight),i=Bn(n.x,n.y+r*e);else if("line"==t)var o=Kn(),i=Bn(n.x,n.y+.5*o+e*o);"page"==t&&(sr.scrollTop+=In(i,!0).y-n.y),fn(i.line,i.ch,!0),Qr=n.x}function mn(e){var t=v(e.line).text,n=e.ch,r=e.ch;if(t){e.after===!1||r==t.length?--n:++r;for(var i=t.charAt(n),o=_(i)?_:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&_(e)};n>0&&o(t.charAt(n-1));)--n;for(;r<t.length&&o(t.charAt(r));)++r}return{from:{line:e.line,ch:n},to:{line:e.line,ch:r}}}function yn(e){an({line:e,ch:0},hn({line:e+1,ch:0}))}function xn(e){if(U(Kr.from,Kr.to))return Cn(Kr.from.line,e);for(var t=Kr.to.line-(Kr.to.ch?0:1),n=Kr.from.line;t>=n;++n)Cn(n,e)}function Cn(e,t){if(t||(t="add"),"smart"==t)if(Sr.indent)var n=Zn(e);else t="prev";var r,i=v(e),o=i.indentation(nr.tabSize),l=i.text.match(/^\s*/)[0];"smart"==t&&(r=Sr.indent(n,i.text.slice(l.length),i.text),r==yt&&(t="prev")),"prev"==t?r=e?v(e-1).indentation(nr.tabSize):0:"add"==t?r=o+nr.indentUnit:"subtract"==t&&(r=o-nr.indentUnit),r=Math.max(0,r);var a="",s=0;if(nr.indentWithTabs)for(var u=Math.floor(r/nr.tabSize);u;--u)s+=nr.tabSize,a+="    ";r>s&&(a+=B(r-s)),a!=l&&Pt(a,{line:e,ch:0},{line:e,ch:l.length}),i.stateAfter=null}function bn(){Sr=e.getMode(nr,nr.mode),Tr.iter(0,Tr.size,function(e){e.stateAfter=null}),Ar=0,Jn(100)}function Sn(){var e=nr.gutter||nr.lineNumbers;vr.style.display=e?"":"none",e?Ir=!0:ur.parentNode.style.marginLeft=0}function kn(){if(nr.lineWrapping){Cr.className+=" CodeMirror-wrap";var e=xr.clientWidth/Un()-3;Tr.iter(0,Tr.size,function(t){if(!t.hidden){var n=Math.ceil(t.text.length/e)||1;1!=n&&M(t,n)}}),pr.style.minWidth=hr.style.left=""}else Cr.className=Cr.className.replace(" CodeMirror-wrap",""),Bt(),Tr.iter(0,Tr.size,function(e){1==e.height||e.hidden||M(e,1)});Hr.push({from:0,to:Tr.size})}function wn(){xr.className=xr.className.replace(/\s*cm-s-\S+/g,"")+nr.theme.replace(/(^|\s)\s*/g," cm-s-")}function Mn(){var e=ot[nr.keyMap].style;Cr.className=Cr.className.replace(/\s*cm-keymap-\S+/g,"")+(e?" cm-keymap-"+e:"")}function Tn(e,t){this.lines=[],this.type=e,t&&(this.style=t)}function An(e,t,n,r){e=hn(e),t=hn(t);var i=new Tn("range",n);if(r)for(var o in r)r.hasOwnProperty(o)&&(i[o]=r[o]);var l=e.line;return Tr.iter(l,t.line+1,function(n){var r={from:l==e.line?e.ch:null,to:l==t.line?t.ch:null,marker:i};n.markedSpans=(n.markedSpans||[]).concat([r]),i.lines.push(n),++l}),Hr.push({from:e.line,to:t.line+1}),i}function Ln(e){e=hn(e);var t=new Tn("bookmark"),n=v(e.line);ei.addChange(e.line,1,[p(n.text,n.markedSpans)],!0);var r={from:e.ch,to:e.ch,marker:t};return n.markedSpans=(n.markedSpans||[]).concat([r]),t.lines.push(n),t}function Nn(e){e=hn(e);var t=[],n=v(e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(null==i.from||i.from<=e.ch)&&(null==i.to||i.to>=e.ch)&&t.push(i.marker)}return t}function En(e,t,n){return"number"==typeof e&&(e=v(cn(e))),e.gutterMarker={text:t,style:n},Ir=!0,e}function Wn(e){"number"==typeof e&&(e=v(cn(e))),e.gutterMarker=null,Ir=!0}function Dn(e,t){var n=e,r=e;return"number"==typeof e?r=v(cn(e)):n=b(e),null==n?null:t(r,n)?(Hr.push({from:n,to:n+1}),r):null}function zn(e,t,n){return Dn(e,function(e){return e.className!=t||e.bgClassName!=n?(e.className=t,e.bgClassName=n,!0):void 0})}function Hn(e,t){return Dn(e,function(e,n){if(e.hidden!=t){e.hidden=t,nr.lineWrapping||(t&&e.text.length==Zr.text.length?_r=!0:!t&&e.text.length>Zr.text.length&&(Zr=e,_r=!1)),M(e,t?0:1);var r=Kr.from.line,i=Kr.to.line;if(t&&(r==n||i==n)){var o=r==n?un({line:r,ch:0},r,0):Kr.from,l=i==n?un({line:i,ch:0},i,0):Kr.to;if(!l)return;sn(o,l)}return Ir=!0}})}function On(e){if("number"==typeof e){if(!g(e))return null;var t=e;if(e=v(e),!e)return null}else{var t=b(e);if(null==t)return null}var n=e.gutterMarker;return{line:t,handle:e,text:e.text,markerText:n&&n.text,markerClass:n&&n.style,lineClass:e.className,bgClass:e.bgClassName}}function Rn(e,t){if(0==t)return{top:0,left:0};var n=L(e,t);$(dr,n);var r=n.anchor,i=r.offsetTop,o=r.offsetLeft;if(at&&0==i&&0==o){var l=G("span","x");r.parentNode.insertBefore(l,r.nextSibling),i=l.offsetTop}return{top:i,left:o}}function In(e,t){var n,r=Kn(),i=r*(k(Tr,e.line)-(t?Yr:0));if(0==e.ch)n=0;else{var o=Rn(v(e.line),e.ch);n=o.left,nr.lineWrapping&&(i+=Math.max(0,o.top))}return{x:n,y:i,yBot:i+r}}function Bn(e,t){function n(e){var t=Rn(a,e);if(u){var n=Math.round(t.top/r);return h=n!=f,Math.max(0,t.left+(n-f)*xr.clientWidth)}return t.left}var r=Kn(),i=Un(),o=Yr+Math.floor(t/r);if(0>o)return{line:0,ch:0};var l=S(Tr,o);if(l>=Tr.size)return{line:Tr.size-1,ch:v(Tr.size-1).text.length};var a=v(l),s=a.text,u=nr.lineWrapping,f=u?o-k(Tr,l):0;if(0>=e&&0==f)return{line:l,ch:0};for(var c,h=!1,d=0,p=0,g=s.length,m=Math.min(g,Math.ceil((e+f*xr.clientWidth*.9)/i));;){var y=n(m);if(!(e>=y&&g>m)){c=y,g=m;break}m=Math.min(g,Math.ceil(1.2*m))}if(e>c)return{line:l,ch:g};for(m=Math.floor(.8*g),y=n(m),e>y&&(d=m,p=y);;){if(1>=g-d){var x=c-e>e-p;return{line:l,ch:x?d:g,after:x}}var C=Math.ceil((d+g)/2),b=n(C);b>e?(g=C,c=b,h&&(c+=1e3)):(d=C,p=b)}}function Pn(e){var t=In(e,!0),n=R(pr);return{x:n.left+t.x,y:n.top+t.y,yBot:n.top+t.yBot}}function Kn(){if(null==ci){ci=G("pre");for(var e=0;49>e;++e)ci.appendChild(document.createTextNode("x")),ci.appendChild(G("br"));ci.appendChild(document.createTextNode("x"))}var t=ur.clientHeight;return t==fi?ui:(fi=t,$(dr,ci.cloneNode(!0)),ui=dr.firstChild.offsetHeight/50||1,Y(dr),ui)}function Un(){if(xr.clientWidth==pi)return hi;pi=xr.clientWidth;var e=G("span","x"),t=G("pre",[e]);return $(dr,t),hi=e.offsetWidth||10}function Fn(){return pr.offsetTop}function Vn(){return pr.offsetLeft}function Gn(e,t){var n,r,i=R(xr,!0);try{n=e.clientX,r=e.clientY}catch(e){return null}if(!t&&(n-i.left>xr.clientWidth||r-i.top>xr.clientHeight))return null;var o=R(pr,!0);return Bn(n-o.left,r-o.top)}function Yn(e){function t(){if(lr.style.position="relative",or.style.cssText=i,ut&&(sr.scrollTop=r),Gt(),null!=or.selectionStart){clearTimeout(di);var e=or.value=" "+(U(Kr.from,Kr.to)?"":or.value),t=0;si=" ",or.selectionStart=1,or.selectionEnd=e.length,di=setTimeout(function n(){" "==si&&0==or.selectionStart?er(it.selectAll)(li):t++<10?di=setTimeout(n,500):Xt()},200)}}var n=Gn(e),r=sr.scrollTop;if(n&&!dt){(U(Kr.from,Kr.to)||F(n,Kr.from)||!F(n,Kr.to))&&er(fn)(n.line,n.ch);var i=or.style.cssText;if(lr.style.position="absolute",or.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: white; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",jt(),Xt(!0),U(Kr.from,Kr.to)&&(or.value=si=" "),lt){N(e);var o=z(window,"mouseup",function(){o(),setTimeout(t,20)},!0)}else setTimeout(t,50)}}function $n(){clearInterval(br);var e=!0;cr.style.visibility="",br=setInterval(function(){cr.style.visibility=(e=!e)?"":"hidden"},nr.cursorBlinkRate)}function Xn(e){function t(e,t,n){if(e.text)for(var r,i=e.styles,o=l?0:e.text.length-1,s=l?0:i.length-2,u=l?i.length:-2;s!=u;s+=2*a){var f=i[s];if(i[s+1]==h){for(var c=l?0:f.length-1,g=l?f.length:-1;c!=g;c+=a,o+=a)if(o>=t&&n>o&&p.test(r=f.charAt(c))){var v=gi[r];if(">"==v.charAt(1)==l)d.push(r);else{if(d.pop()!=v.charAt(0))return{pos:o,match:!1};if(!d.length)return{pos:o,match:!0}}}}else o+=a*f.length}}var n=Kr.inverted?Kr.from:Kr.to,r=v(n.line),i=n.ch-1,o=i>=0&&gi[r.text.charAt(i)]||gi[r.text.charAt(++i)];if(o){for(var l=(o.charAt(0),">"==o.charAt(1)),a=l?1:-1,s=r.styles,u=i+1,f=0,c=s.length;c>f;f+=2)if((u-=s[f].length)<=0){var h=s[f+1];break}for(var d=[r.text.charAt(i)],p=/[(){}[\]]/,f=n.line,c=l?Math.min(f+100,Tr.size):Math.max(-1,f-100);f!=c;f+=a){var r=v(f),g=f==n.line,m=t(r,g&&l?i+1:0,g&&!l?i:r.text.length);if(m)break}m||(m={pos:null,match:!1});var h=m.match?"CodeMirror-matchingbracket":"CodeMirror-nonmatchingbracket",y=An({line:n.line,ch:i},{line:n.line,ch:i+1},h),x=null!=m.pos&&An({line:f,ch:m.pos},{line:f,ch:m.pos+1},h),C=er(function(){y.clear(),x&&x.clear()});e?setTimeout(C,800):Pr=C}}function jn(e){for(var t,n,r=e,i=e-40;r>i;--r){if(0==r)return 0;var o=v(r-1);if(o.stateAfter)return r;var l=o.indentation(nr.tabSize);(null==n||t>l)&&(n=r-1,t=l)}return n}function Zn(e){var t=jn(e),n=t&&v(t-1).stateAfter;return n=n?i(Sr,n):o(Sr),Tr.iter(t,e,function(r){r.process(Sr,n,nr.tabSize),r.stateAfter=t==e-1||t%5==0?i(Sr,n):null}),n}function _n(){if(!(Ar>=Xr)){var e=+new Date+nr.workTime,t=i(Sr,Zn(Ar)),n=Ar;Tr.iter(Ar,Xr,function(n){return Ar>=$r?(n.highlight(Sr,t,nr.tabSize),n.stateAfter=i(Sr,t)):(n.process(Sr,t,nr.tabSize),n.stateAfter=Ar%5==0?i(Sr,t):null),++Ar,+new Date>e?(Jn(nr.workDelay),!0):void 0}),Xr>n&&Ar>=$r&&er(function(){Hr.push({from:n,to:Ar})})()}}function Jn(e){Xr>Ar&&Mr.set(e,_n)}function qn(){Dr=zr=Or=null,Hr=[],Rr=!1,Br=[]}function Qn(){if(_r&&Bt(),Jr&&!nr.lineWrapping){var e=hr.offsetWidth,t=Rn(Zr,Zr.text.length).left;st||(hr.style.left=t+"px",pr.style.minWidth=t+e+"px"),Jr=!1}var n,r;if(Rr){var i=_t();n=qt(i.x,i.y,i.x,i.yBot)}(Hr.length||n&&null!=n.scrollTop)&&(r=en(Hr,!0,n&&n.scrollTop)),r||(Rr&&on(),Ir&&rn()),n&&Zt(),Rr&&$n(),kr&&(Dr===!0||Dr!==!1&&Rr)&&Xt(zr),Rr&&nr.matchBrackets&&setTimeout(er(function(){Pr&&(Pr(),Pr=null),U(Kr.from,Kr.to)&&Xn(!1)}),20);var o=Rr,l=Br;Or&&nr.onChange&&li&&nr.onChange(li,Or),o&&nr.onCursorActivity&&nr.onCursorActivity(li);for(var a=0;a<l.length;++a)l[a](li);r&&nr.onUpdate&&nr.onUpdate(li)}function er(e){return function(){vi++||qn();try{var t=e.apply(this,arguments)}finally{--vi||Qn()}return t}}function tr(e){ei.startCompound();try{return e()}finally{ei.endCompound()}}var nr={},rr=e.defaults;for(var ir in rr)rr.hasOwnProperty(ir)&&(nr[ir]=(u&&u.hasOwnProperty(ir)?u:rr)[ir]);var or=G("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em");or.setAttribute("wrap","off"),or.setAttribute("autocorrect","off"),or.setAttribute("autocapitalize","off");var lr=G("div",[or],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),ar=G("div",null,"CodeMirror-scrollbar-inner"),sr=G("div",[ar],"CodeMirror-scrollbar"),ur=G("div"),fr=G("div",null,null,"position: relative; z-index: -1"),cr=G("pre"," ","CodeMirror-cursor"),hr=G("pre"," ","CodeMirror-cursor","visibility: hidden"),dr=G("div",null,null,"position: absolute; width: 100%; height: 0px; overflow: hidden; visibility: hidden;"),pr=G("div",[dr,cr,hr,fr,ur],null,"position: relative; z-index: 0"),gr=G("div",null,"CodeMirror-gutter-text"),vr=G("div",[gr],"CodeMirror-gutter"),mr=G("div",[vr,G("div",[pr],"CodeMirror-lines")],null,"position: relative"),yr=G("div",[mr],null,"position: relative"),xr=G("div",[yr],"CodeMirror-scroll");xr.setAttribute("tabIndex","-1");var Cr=G("div",[lr,sr,xr],"CodeMirror"+(nr.lineWrapping?" CodeMirror-wrap":""));l.appendChild?l.appendChild(Cr):l(Cr),wn(),Mn(),J&&(or.style.width="0px"),ct||(xr.draggable=!0),pr.style.outline="none",null!=nr.tabindex&&(or.tabIndex=nr.tabindex),nr.autofocus&&jt(),nr.gutter||nr.lineNumbers||(vr.style.display="none"),gt&&(lr.style.height="1px",lr.style.position="absolute"),vt?(sr.style.zIndex=-2,sr.style.visibility="hidden"):st&&(sr.style.minWidth="18px");var br,Sr,kr,wr=new H,Mr=new H,Tr=new x([new y([new m("")])]),Ar=0;bn();var Lr,Nr,Er,Wr,Dr,zr,Hr,Or,Rr,Ir,Br,Pr,Kr={from:{line:0,ch:0},to:{line:0,ch:0},inverted:!1},Ur=0,Fr=!1,Vr=!1,Gr=!1,Yr=0,$r=0,Xr=0,jr=0,Zr=v(0),_r=!1,Jr=!0,qr=!1,Qr=null;er(function(){O(nr.value||""),Dr=!1})();var ei=new w;z(xr,"mousedown",er(rt)),z(xr,"dblclick",er(ht)),z(pr,"selectstart",A),lt||z(xr,"contextmenu",Yn),z(xr,"scroll",et),z(sr,"scroll",Q),z(sr,"mousedown",function(){kr&&setTimeout(jt,0)});var ti=z(window,"resize",function(){Cr.parentNode?en(!0):ti()},!0);z(or,"keyup",er(Lt)),z(or,"input",Yt),z(or,"keydown",er(Tt)),z(or,"keypress",er(At)),z(or,"focus",Nt),z(or,"blur",Et),nr.dragDrop&&(z(xr,"dragstart",mt),z(xr,"dragenter",f),z(xr,"dragover",f),z(xr,"drop",er(pt))),z(xr,"paste",function(){jt(),Yt()}),z(or,"paste",function(){Gr=!0,Yt()}),z(or,"cut",er(function(){nr.readOnly||Kt("")})),gt&&z(yr,"mouseup",function(){document.activeElement==or&&or.blur(),jt()});var ni;try{ni=document.activeElement==or}catch(ri){}ni||nr.autofocus?setTimeout(Nt,20):Et();var ii,oi={},li=Cr.CodeMirror={getValue:X,setValue:er(O),getSelection:Vt,replaceSelection:er(Kt),focus:function(){window.focus(),jt(),Nt(),Yt()},setOption:function(e,t){var n=nr[e];nr[e]=t,"mode"==e||"indentUnit"==e?bn():"readOnly"==e&&"nocursor"==t?(Et(),or.blur()):"readOnly"!=e||t?"theme"==e?wn():"lineWrapping"==e&&n!=t?er(kn)():"tabSize"==e?en(!0):"keyMap"==e?Mn():"tabindex"==e&&(or.tabIndex=t):Xt(!0),("lineNumbers"==e||"gutter"==e||"firstLineNumber"==e||"theme"==e||"lineNumberFormatter"==e)&&(Sn(),en(!0))},getOption:function(e){return nr[e]},getMode:function(){return Sr},undo:er(zt),redo:er(Ht),indentLine:er(function(e,t){"string"!=typeof t&&(t=null==t?nr.smartIndent?"smart":"prev":t?"add":"subtract"),g(e)&&Cn(e,t)}),indentSelection:er(xn),historySize:function(){return{undo:ei.done.length,redo:ei.undone.length}},clearHistory:function(){ei=new w},setHistory:function(e){ei=new w,ei.done=e.done,ei.undone=e.undone},getHistory:function(){function e(e){for(var t,n=0,r=[];n<e.length;++n){r.push(t=[]);for(var i=0,o=e[n];i<o.length;++i){var l=[],a=o[i];t.push({start:a.start,added:a.added,old:l});for(var s=0;s<a.old.length;++s)l.push(h(a.old[s]))}}return r}return{done:e(ei.done),undone:e(ei.undone)}},matchBrackets:er(function(){Xn(!0)}),getTokenAt:er(function(e){return e=hn(e),v(e.line).getTokenAt(Sr,Zn(e.line),nr.tabSize,e.ch)}),getStateAfter:function(e){return e=cn(null==e?Tr.size-1:e),Zn(e+1)},cursorCoords:function(e,t){return null==e&&(e=Kr.inverted),this.charCoords(e?Kr.from:Kr.to,t)},charCoords:function(e,t){return e=hn(e),"local"==t?In(e,!1):"div"==t?In(e,!0):Pn(e)},coordsChar:function(e){var t=R(pr);return Bn(e.x-t.left,e.y-t.top)},defaultTextHeight:function(){return Kn()},markText:er(An),setBookmark:Ln,findMarksAt:Nn,setMarker:er(En),clearMarker:er(Wn),setLineClass:er(zn),hideLine:er(function(e){return Hn(e,!0)}),showLine:er(function(e){return Hn(e,!1)}),onDeleteLine:function(e,t){if("number"==typeof e){if(!g(e))return null;e=v(e)}return(e.handlers||(e.handlers=[])).push(t),e},lineInfo:On,getViewport:function(){return{from:$r,to:Xr}},addWidget:function(e,t,n,r,i){e=In(hn(e));var o=e.yBot,l=e.x;if(t.style.position="absolute",yr.appendChild(t),"over"==r)o=e.y;else if("near"==r){var a=Math.max(xr.offsetHeight,Tr.height*Kn()),s=Math.max(yr.clientWidth,pr.clientWidth)-Vn();e.yBot+t.offsetHeight>a&&e.y>t.offsetHeight&&(o=e.y-t.offsetHeight),l+t.offsetWidth>s&&(l=s-t.offsetWidth)
}t.style.top=o+Fn()+"px",t.style.left=t.style.right="","right"==i?(l=yr.clientWidth-t.offsetWidth,t.style.right="0px"):("left"==i?l=0:"middle"==i&&(l=(yr.clientWidth-t.offsetWidth)/2),t.style.left=l+Vn()+"px"),n&&Jt(l,o,l+t.offsetWidth,o+t.offsetHeight)},lineCount:function(){return Tr.size},clipPos:hn,getCursor:function(e){return null==e&&(e=Kr.inverted),V(e?Kr.from:Kr.to)},somethingSelected:function(){return!U(Kr.from,Kr.to)},setCursor:er(function(e,t,n){null==t&&"number"==typeof e.line?fn(e.line,e.ch,n):fn(e,t,n)}),setSelection:er(function(e,t,n){(n?an:sn)(hn(e),hn(t||e))}),getLine:function(e){return g(e)?v(e).text:void 0},getLineHandle:function(e){return g(e)?v(e):void 0},setLine:er(function(e,t){g(e)&&Pt(t,{line:e,ch:0},{line:e,ch:v(e).text.length})}),removeLine:er(function(e){g(e)&&Pt("",{line:e,ch:0},hn({line:e+1,ch:0}))}),replaceRange:er(Pt),getRange:function(e,t,n){return Ft(hn(e),hn(t),n)},triggerOnKeyDown:er(Tt),execCommand:function(e){return it[e](li)},moveH:er(pn),deleteH:er(gn),moveV:er(vn),toggleOverwrite:function(){Fr?(Fr=!1,cr.className=cr.className.replace(" CodeMirror-overwrite","")):(Fr=!0,cr.className+=" CodeMirror-overwrite")},posFromIndex:function(e){var t,n=0;return Tr.iter(0,Tr.size,function(r){var i=r.text.length+1;return i>e?(t=e,!0):(e-=i,void++n)}),hn({line:n,ch:t})},indexFromPos:function(e){if(e.line<0||e.ch<0)return 0;var t=e.ch;return Tr.iter(0,e.line,function(e){t+=e.text.length+1}),t},scrollTo:function(e,t){null!=e&&(xr.scrollLeft=e),null!=t&&(sr.scrollTop=xr.scrollTop=t),en([])},getScrollInfo:function(){return{x:xr.scrollLeft,y:sr.scrollTop,height:sr.scrollHeight,width:xr.scrollWidth}},scrollIntoView:function(e){var t=In(e?hn(e):Kr.inverted?Kr.from:Kr.to);Jt(t.x,t.y,t.x,t.yBot)},setSize:function(e,t){function n(e){return e=String(e),/^\d+$/.test(e)?e+"px":e}null!=e&&(Cr.style.width=n(e)),null!=t&&(xr.style.height=n(t)),li.refresh()},operation:function(e){return er(e)()},compoundChange:function(e){return tr(e)},refresh:function(){en(!0,null,Ur),sr.scrollHeight>Ur&&(sr.scrollTop=Ur)},getInputField:function(){return or},getWrapperElement:function(){return Cr},getScrollerElement:function(){return xr},getGutterElement:function(){return vr},on:function(e,t){return t&&"function"==typeof t?(oi[e]?oi[e].push(t):oi[e]=[t],this):this}},ai=null,si="";Tn.prototype.clear=er(function(){for(var e,t,n=0;n<this.lines.length;++n){var r=this.lines[n],i=a(r.markedSpans,this);null!=i.from&&(e=b(r)),null!=i.to&&(t=b(r)),r.markedSpans=s(r.markedSpans,i)}null!=e&&Hr.push({from:e,to:t+1}),this.lines.length=0,this.explicitlyCleared=!0}),Tn.prototype.find=function(){for(var e,t,n=0;n<this.lines.length;++n){var r=this.lines[n],i=a(r.markedSpans,this);if(null!=i.from||null!=i.to){var o=b(r);null!=i.from&&(e={line:o,ch:i.from}),null!=i.to&&(t={line:o,ch:i.to})}}return"bookmark"==this.type?e:e&&{from:e,to:t}};var ui,fi,ci,hi,di,pi=0,gi={"(":")>",")":"(<","[":"]>","]":"[<","{":"}>","}":"{<"},vi=0;for(var mi in tt)tt.propertyIsEnumerable(mi)&&!li.propertyIsEnumerable(mi)&&(li[mi]=tt[mi]);for(var yi=0;yi<nt.length;++yi)nt[yi](li);return li}function t(e){return"string"==typeof e?ot[e]:e}function n(e,n,r,i,o){function l(n){n=t(n);var r=n[e];if(r===!1)return o&&o(),!0;if(null!=r&&i(r))return!0;if(n.nofallthrough)return o&&o(),!0;var a=n.fallthrough;if(null==a)return!1;if("[object Array]"!=Object.prototype.toString.call(a))return l(a);for(var s=0,u=a.length;u>s;++s)if(l(a[s]))return!0;return!1}return n&&l(n)?!0:l(r)}function r(e){var t=Mt[D(e,"keyCode")];return"Ctrl"==t||"Alt"==t||"Shift"==t||"Mod"==t}function i(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function o(e,t,n){return e.startState?e.startState(t,n):!0}function l(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8}function a(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function s(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function u(e,t,n){if(e)for(var r,i=0;i<e.length;++i){var o=e[i],l=o.marker,a=null==o.from||(l.inclusiveLeft?o.from<=t:o.from<t);if(a||"bookmark"==l.type&&o.from==t&&o.from!=n){var s=null==o.to||(l.inclusiveRight?o.to>=t:o.to>t);(r||(r=[])).push({from:o.from,to:s?null:o.to,marker:l})}}return r}function f(e,t){if(e)for(var n,r=0;r<e.length;++r){var i=e[r],o=i.marker,l=null==i.to||(o.inclusiveRight?i.to>=t:i.to>t);if(l||"bookmark"==o.type&&i.from==t){var a=null==i.from||(o.inclusiveLeft?i.from<=t:i.from<t);(n||(n=[])).push({from:a?null:i.from-t,to:null==i.to?null:i.to-t,marker:o})}}return n}function c(e,t,n,r,i){if(!e&&!t)return i;var o=u(e,n),l=f(t,r),s=1==i.length,c=P(i).length+(s?n:0);if(o)for(var h=0;h<o.length;++h){var d=o[h];if(null==d.to){var g=a(l,d.marker);g?s&&(d.to=null==g.to?null:g.to+c):d.to=n}}if(l)for(var h=0;h<l.length;++h){var d=l[h];if(null!=d.to&&(d.to+=c),null==d.from){var g=a(o,d.marker);g||(d.from=c,s&&(o||(o=[])).push(d))}else d.from+=c,s&&(o||(o=[])).push(d)}var v=[p(i[0],o)];if(!s){var m,y=i.length-2;if(y>0&&o)for(var h=0;h<o.length;++h)null==o[h].to&&(m||(m=[])).push({from:null,to:null,marker:o[h].marker});for(var h=0;y>h;++h)v.push(p(i[h+1],m));v.push(p(P(i),l))}return v}function h(e){return"string"==typeof e?e:e.text}function d(e){if("string"==typeof e)return null;for(var t=e.markedSpans,n=null,r=0;r<t.length;++r)t[r].marker.explicitlyCleared?n||(n=t.slice(0,r)):n&&n.push(t[r]);return n?n.length?n:null:t}function p(e,t){return t?{text:e,markedSpans:t}:e}function g(e){var t=e.markedSpans;if(t){for(var n=0;n<t.length;++n){var r=t[n].marker.lines,i=Z(r,e);r.splice(i,1)}e.markedSpans=null}}function v(e,t){if(t){for(var n=0;n<t.length;++n){t[n].marker.lines.push(e)}e.markedSpans=t}}function m(e,t){this.text=e,this.height=1,v(this,t)}function y(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;n>t;++t)e[t].parent=this,r+=e[t].height;this.height=r}function x(e){this.children=e;for(var t=0,n=0,r=0,i=e.length;i>r;++r){var o=e[r];t+=o.chunkSize(),n+=o.height,o.parent=this}this.size=t,this.height=n,this.parent=null}function C(e,t){for(;!e.lines;)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(i>t){e=r;break}t-=i}return e.lines[t]}function b(e){if(null==e.parent)return null;for(var t=e.parent,n=Z(t.lines,e),r=t.parent;r;t=r,r=r.parent){var i=0;for(r.children.length;r.children[i]!=t;++i)n+=r.children[i].chunkSize()}return n}function S(e,t){var n=0;e:do{for(var r=0,i=e.children.length;i>r;++r){var o=e.children[r],l=o.height;if(l>t){e=o;continue e}t-=l,n+=o.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;i>r;++r){var a=e.lines[r],s=a.height;if(s>t)break;t-=s}return n+r}function k(e,t){var n=0;e:do{for(var r=0,i=e.children.length;i>r;++r){var o=e.children[r],l=o.chunkSize();if(l>t){e=o;continue e}t-=l,n+=o.height}return n}while(!e.lines);for(var r=0;t>r;++r)n+=e.lines[r].height;return n}function w(){this.time=0,this.done=[],this.undone=[],this.compound=0,this.closed=!1}function M(){N(this)}function T(e){return e.stop||(e.stop=M),e}function A(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function L(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function N(e){A(e),L(e)}function E(e){return e.target||e.srcElement}function W(e){var t=e.which;return null==t&&(1&e.button?t=1:2&e.button?t=3:4&e.button&&(t=2)),q&&e.ctrlKey&&1==t&&(t=3),t}function D(e,t){var n=e.override&&e.override.hasOwnProperty(t);return n?e.override[t]:e[t]}function z(e,t,n,r){if("function"==typeof e.addEventListener){if(e.addEventListener(t,n,!1),r)return function(){e.removeEventListener(t,n,!1)}}else{var i=function(e){n(e||window.event)};if(e.attachEvent("on"+t,i),r)return function(){e.detachEvent("on"+t,i)}}}function H(){this.id=null}function O(e,t,n){null==t&&(t=e.search(/[^\s\u00a0]/),-1==t&&(t=e.length));for(var r=0,i=0;t>r;++r)"   "==e.charAt(r)?i+=n-i%n:++i;return i}function R(e,t){try{var n=e.getBoundingClientRect();n={top:n.top,left:n.left}}catch(r){n={top:0,left:0}}if(!t)if(null==window.pageYOffset){var i=document.documentElement||document.body.parentNode;null==i.scrollTop&&(i=document.body),n.top+=i.scrollTop,n.left+=i.scrollLeft}else n.top+=window.pageYOffset,n.left+=window.pageXOffset;return n}function I(e){return e.textContent||e.innerText||e.nodeValue||""}function B(e){for(;bt.length<=e;)bt.push(P(bt)+" ");return bt[e]}function P(e){return e[e.length-1]}function K(e){J?(e.selectionStart=0,e.selectionEnd=e.value.length):e.select()}function U(e,t){return e.line==t.line&&e.ch==t.ch}function F(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function V(e){return{line:e.line,ch:e.ch}}function G(e,t,n,r){var i=document.createElement(e);if(n&&(i.className=n),r&&(i.style.cssText=r),"string"==typeof t)X(i,t);else if(t)for(var o=0;o<t.length;++o)i.appendChild(t[o]);return i}function Y(e){return e.innerHTML="",e}function $(e,t){Y(e).appendChild(t)}function X(e,t){ut?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function j(e,t){if(!t)return 0;if(!e)return t.length;for(var n=e.length,r=t.length;n>=0&&r>=0&&e.charAt(n)==t.charAt(r);--n,--r);return r+1}function Z(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;r>n;++n)if(e[n]==t)return n;return-1}function _(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||St.test(e))}e.defaults={value:"",mode:null,theme:"default",indentUnit:2,indentWithTabs:!1,smartIndent:!0,tabSize:4,keyMap:"default",extraKeys:null,electricChars:!0,autoClearEmptyLines:!1,onKeyEvent:null,onDragEvent:null,lineWrapping:!1,lineNumbers:!1,gutter:!1,fixedGutter:!1,firstLineNumber:1,readOnly:!1,dragDrop:!0,onChange:null,onCursorActivity:null,onViewportChange:null,onGutterClick:null,onUpdate:null,onFocus:null,onBlur:null,onScroll:null,matchBrackets:!1,cursorBlinkRate:530,workTime:100,workDelay:200,pollInterval:100,undoDepth:40,tabindex:null,autofocus:null,lineNumberFormatter:function(e){return e}};var J=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),q=J||/Mac/.test(navigator.platform),Q=(/Win/.test(navigator.platform),e.modes={}),et=e.mimeModes={};e.defineMode=function(t,n){if(e.defaults.mode||"null"==t||(e.defaults.mode=t),arguments.length>2){n.dependencies=[];for(var r=2;r<arguments.length;++r)n.dependencies.push(arguments[r])}Q[t]=n},e.defineMIME=function(e,t){et[e]=t},e.resolveMode=function(t){if("string"==typeof t&&et.hasOwnProperty(t))t=et[t];else if("string"==typeof t&&/^[\w\-]+\/[\w\-]+\+xml$/.test(t))return e.resolveMode("application/xml");return"string"==typeof t?{name:t}:t||{name:"null"}},e.getMode=function(t,n){var n=e.resolveMode(n),r=Q[n.name];if(!r)return e.getMode(t,"text/plain");var i=r(t,n);if(rt.hasOwnProperty(n.name)){var o=rt[n.name];for(var l in o)o.hasOwnProperty(l)&&(i[l]=o[l])}return i.name=n.name,i},e.listModes=function(){var e=[];for(var t in Q)Q.propertyIsEnumerable(t)&&e.push(t);return e},e.listMIMEs=function(){var e=[];for(var t in et)et.propertyIsEnumerable(t)&&e.push({mime:t,mode:et[t]});return e};var tt=e.extensions={};e.defineExtension=function(e,t){tt[e]=t};var nt=[];e.defineInitHook=function(e){nt.push(e)};var rt=e.modeExtensions={};e.extendMode=function(e,t){var n=rt.hasOwnProperty(e)?rt[e]:rt[e]={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r])};var it=e.commands={selectAll:function(e){e.setSelection({line:0,ch:0},{line:e.lineCount()-1})},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!U(t,n);r||e.getLine(t.line).length!=t.ch?e.replaceRange("",t,r?n:{line:t.line}):e.replaceRange("",t,{line:t.line+1,ch:0})},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",{line:t,ch:0},{line:t})},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.setCursor(0,0,!0)},goDocEnd:function(e){e.setSelection({line:e.lineCount()-1},null,!0)},goLineStart:function(e){e.setCursor(e.getCursor().line,0,!0)},goLineStartSmart:function(e){var t=e.getCursor(),n=e.getLine(t.line),r=Math.max(0,n.search(/\S/));e.setCursor(t.line,t.ch<=r&&t.ch?0:r,!0)},goLineEnd:function(e){e.setSelection({line:e.getCursor().line},null,!0)},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goWordRight:function(e){e.moveH(1,"word")},delCharLeft:function(e){e.deleteH(-1,"char")},delCharRight:function(e){e.deleteH(1,"char")},delWordLeft:function(e){e.deleteH(-1,"word")},delWordRight:function(e){e.deleteH(1,"word")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("   ","end")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("    ","end")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),{line:t.line,ch:t.ch-1},{line:t.line,ch:t.ch+1})},newlineAndIndent:function(e){e.replaceSelection("\n","end"),e.indentLine(e.getCursor().line)},toggleOverwrite:function(e){e.toggleOverwrite()}},ot=e.keyMap={};ot.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharRight",Backspace:"delCharLeft",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},ot.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goWordLeft","Ctrl-Right":"goWordRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delWordLeft","Ctrl-Delete":"delWordRight","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},ot.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goWordLeft","Alt-Right":"goWordRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delWordLeft","Ctrl-Alt-Backspace":"delWordRight","Alt-Delete":"delWordRight","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore",fallthrough:["basic","emacsy"]},ot["default"]=q?ot.macDefault:ot.pcDefault,ot.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharRight","Ctrl-H":"delCharLeft","Alt-D":"delWordRight","Alt-Backspace":"delWordLeft","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},e.isModifierKey=r,e.fromTextArea=function(t,n){function r(){t.value=s.getValue()}if(n||(n={}),n.value=t.value,!n.tabindex&&t.tabindex&&(n.tabindex=t.tabindex),null==n.autofocus){var i=document.body;try{i=document.activeElement}catch(o){}n.autofocus=i==t||null!=t.getAttribute("autofocus")&&i==document.body}if(t.form){var l=z(t.form,"submit",r,!0),a=t.form.submit;t.form.submit=function u(){r(),t.form.submit=a,t.form.submit(),t.form.submit=u}}t.style.display="none";var s=e(function(e){t.parentNode.insertBefore(e,t.nextSibling)},n);return s.save=r,s.getTextArea=function(){return t},s.toTextArea=function(){r(),t.parentNode.removeChild(s.getWrapperElement()),t.style.display="",t.form&&(l(),"function"==typeof t.form.submit&&(t.form.submit=a))},s};var lt=/gecko\/\d{7}/i.test(navigator.userAgent),at=/MSIE \d/.test(navigator.userAgent),st=/MSIE [1-7]\b/.test(navigator.userAgent),ut=/MSIE [1-8]\b/.test(navigator.userAgent),ft=at&&5==document.documentMode,ct=/WebKit\//.test(navigator.userAgent),ht=/Chrome\//.test(navigator.userAgent),dt=/Opera\//.test(navigator.userAgent),pt=/Apple Computer/.test(navigator.vendor),gt=/KHTML\//.test(navigator.userAgent),vt=/Mac OS X 10\D([7-9]|\d\d)\D/.test(navigator.userAgent);e.copyState=i,e.startState=o,e.innerMode=function(e,t){for(;e.innerMode;){var n=e.innerMode(t);t=n.state,e=n.mode}return n||{mode:e,state:t}},l.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return 0==this.pos},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){return this.pos<this.string.length?this.string.charAt(this.pos++):void 0},eat:function(e){var t=this.string.charAt(this.pos);if("string"==typeof e)var n=t==e;else var n=t&&(e.test?e.test(t):e(t));return n?(++this.pos,t):void 0},eatWhile:function(e){for(var t=this.pos;this.eat(e););return this.pos>t},eatSpace:function(){for(var e=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);return t>-1?(this.pos=t,!0):void 0},backUp:function(e){this.pos-=e},column:function(){return O(this.string,this.start,this.tabSize)},indentation:function(){return O(this.string,null,this.tabSize)},match:function(e,t,n){if("string"!=typeof e){var r=this.string.slice(this.pos).match(e);return r&&r.index>0?null:(r&&t!==!1&&(this.pos+=r[0].length),r)}var i=function(e){return n?e.toLowerCase():e};return i(this.string).indexOf(i(e),this.pos)==this.pos?(t!==!1&&(this.pos+=e.length),!0):void 0},current:function(){return this.string.slice(this.start,this.pos)}},e.StringStream=l;var mt=" ";lt||at&&!st?mt="​":dt&&(mt=""),m.prototype={update:function(e,t){this.text=e,this.stateAfter=this.styles=null,g(this),v(this,t)},highlight:function(e,t,n){var r=new l(this.text,n),i=this.styles||(this.styles=[]),o=i.length=0;for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol();){var a=e.token(r,t),s=r.current();if(r.start=r.pos,o&&i[o-1]==a?i[o-2]+=s:s&&(i[o++]=s,i[o++]=a),r.pos>5e3){i[o++]=this.text.slice(r.pos),i[o++]=null;break}}},process:function(e,t,n){var r=new l(this.text,n);for(""==this.text&&e.blankLine&&e.blankLine(t);!r.eol()&&r.pos<=5e3;)e.token(r,t),r.start=r.pos},getTokenAt:function(e,t,n,r){for(var i=this.text,o=new l(i,n);o.pos<r&&!o.eol();){o.start=o.pos;var a=e.token(o,t)}return{start:o.start,end:o.pos,string:o.current(),className:a||null,state:t}},indentation:function(e){return O(this.text,null,e)},getContent:function(e,t,n){function r(t,n,r){if(n){if(o&&at&&" "==n.charAt(0)&&(n=" "+n.slice(1)),o=!1,a.test(n))for(var i=document.createDocumentFragment(),s=0;;){a.lastIndex=s;var u=a.exec(n),f=u?u.index-s:n.length-s;if(f&&(i.appendChild(document.createTextNode(n.slice(s,s+f))),l+=f),!u)break;if(s+=f+1," "==u[0]){var c=e-l%e;i.appendChild(G("span",B(c),"cm-tab")),l+=c}else{var h=G("span","•","cm-invalidchar");h.title="\\u"+u[0].charCodeAt(0).toString(16),i.appendChild(h),l+=1}}else{l+=n.length;var i=document.createTextNode(n)}t.appendChild(r?G("span",[i],r):i)}}function i(e){return e?"cm-"+e.replace(/ +/g," cm-"):null}var o=!0,l=0,a=/[\t\u0000-\u0019\u200b\u2028\u2029\uFEFF]/g,s=G("pre"),u=r;if(null!=t){var f=0,c=s.anchor=G("span");u=function(e,i,o){var l=i.length;if(t>=f&&f+l>t){var a=t-f;if(a&&(r(e,i.slice(0,a),o),n)){var s=i.slice(a-1,a+1);Ct.test(s)?e.appendChild(G("wbr")):!st&&/\w\w/.test(s)&&e.appendChild(document.createTextNode("‍"))}e.appendChild(c),r(c,dt?i.slice(a,a+1):i.slice(a),o),dt&&r(e,i.slice(a+1),o),t--,f+=l}else f+=l,r(e,i,o),f==t&&f==g?(X(c,mt),e.appendChild(c)):f>t+10&&/\s/.test(i)&&(u=function(){})}}var h=this.styles,d=this.text,p=this.markedSpans,g=d.length;if(d||null!=t)if(p&&p.length){p.sort(function(e,t){return e.from-t.from});for(var v,m=0,y=0,x="",C=p[0].from||0,b=[],S=0,k=function(){for(var e;S<p.length&&((e=p[S]).from==m||null==e.from);)"range"==e.marker.type&&b.push(e),++S;C=S<p.length?p[S].from:1/0;for(var t=0;t<b.length;++t){var n=b[t].to;null==n&&(n=1/0),n==m?b.splice(t--,1):C=Math.min(n,C)}};g>m;){C==m&&k();for(var w=Math.min(g,C);;){if(x){for(var M=m+x.length,T=v,A=0;A<b.length;++A){var L=b[A];T=(T?T+" ":"")+L.marker.style,L.marker.endStyle&&L.to===Math.min(M,w)&&(T+=" "+L.marker.endStyle),L.marker.startStyle&&L.from===m&&(T+=" "+L.marker.startStyle)}if(u(s,M>w?x.slice(0,w-m):x,T),M>=w){x=x.slice(w-m),m=w;break}m=M}x=h[y++],v=i(h[y++])}}}else for(var y=0,N=0;g>N;y+=2){var E=h[y],v=h[y+1],W=E.length;N+W>g&&(E=E.slice(0,g-N)),N+=W,u(s,E,i(v))}else u(s," ");return s},cleanUp:function(){this.parent=null,g(this)}},y.prototype={chunkSize:function(){return this.lines.length},remove:function(e,t,n){for(var r=e,i=e+t;i>r;++r){var o=this.lines[r];if(this.height-=o.height,o.cleanUp(),o.handlers)for(var l=0;l<o.handlers.length;++l)n.push(o.handlers[l])}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertHeight:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;i>r;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;r>e;++e)if(n(this.lines[e]))return!0}},x.prototype={chunkSize:function(){return this.size},remove:function(e,t,n){this.size-=t;for(var r=0;r<this.children.length;++r){var i=this.children[r],o=i.chunkSize();if(o>e){var l=Math.min(t,o-e),a=i.height;if(i.remove(e,l,n),this.height-=a-i.height,o==l&&(this.children.splice(r--,1),i.parent=null),0==(t-=l))break;e=0}else e-=o}if(this.size-t<25){var s=[];this.collapse(s),this.children=[new y(s)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;n>t;++t)this.children[t].collapse(e)},insert:function(e,t){for(var n=0,r=0,i=t.length;i>r;++r)n+=t[r].height;this.insertHeight(e,t,n)},insertHeight:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],l=o.chunkSize();if(l>=e){if(o.insertHeight(e,t,n),o.lines&&o.lines.length>50){for(;o.lines.length>50;){var a=o.lines.splice(o.lines.length-25,25),s=new y(a);o.height-=s.height,this.children.splice(r+1,0,s),s.parent=this}this.maybeSpill()}break}e-=l}},maybeSpill:function(){if(!(this.children.length<=10)){var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new x(t);if(e.parent){e.size-=n.size,e.height-=n.height;var r=Z(e.parent.children,e);e.parent.children.splice(r+1,0,n)}else{var i=new x(e.children);i.parent=e,e.children=[i,n],e=i}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()}},iter:function(e,t,n){this.iterN(e,t-e,n)},iterN:function(e,t,n){for(var r=0,i=this.children.length;i>r;++r){var o=this.children[r],l=o.chunkSize();if(l>e){var a=Math.min(t,l-e);if(o.iterN(e,a,n))return!0;if(0==(t-=a))break;e=0}else e-=l}}},w.prototype={addChange:function(e,t,n){this.undone.length=0;var r=+new Date,i=P(this.done),o=i&&P(i),l=r-this.time;if(i&&!this.closed&&this.compound)i.push({start:e,added:t,old:n});else if(l>400||!o||this.closed||o.start>e+n.length||o.start+o.added<e)this.done.push([{start:e,added:t,old:n}]),this.closed=!1;else{for(var a=Math.max(0,o.start-e),s=Math.max(0,e+n.length-(o.start+o.added)),u=a;u>0;--u)o.old.unshift(n[u-1]);for(var u=s;u>0;--u)o.old.push(n[n.length-u]);a&&(o.start=e),o.added+=t-(n.length-a-s)}this.time=r},startCompound:function(){this.compound++||(this.closed=!0)},endCompound:function(){--this.compound||(this.closed=!0)}},e.e_stop=N,e.e_preventDefault=A,e.e_stopPropagation=L,e.connect=z,H.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}};var yt=e.Pass={toString:function(){return"CodeMirror.Pass"}},xt=function(){if(ut)return!1;var e=G("div");return"draggable"in e||"dragDrop"in e}(),Ct=(function(){var e=G("textarea");return e.value="foo\nbar",e.value.indexOf("\r")>-1?"\r\n":"\n"}(),/^$/);lt?Ct=/$'/:pt?Ct=/\-[^ \-?]|\?[^ !'\"\),.\-\/:;\?\]\}]/:ht&&(Ct=/\-[^ \-\.?]|\?[^ \-\.?\]\}:;!'\"\),\/]|[\.!\"#&%\)*+,:;=>\]|\}~][\(\{\[<]|\$'/);var bt=[""],St=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc]/,kt=3!="\n\nb".split(/\n/).length?function(e){for(var t=0,n=[],r=e.length;r>=t;){var i=e.indexOf("\n",t);-1==i&&(i=e.length);var o=e.slice(t,"\r"==e.charAt(i-1)?i-1:i),l=o.indexOf("\r");-1!=l?(n.push(o.slice(0,l)),t+=l+1):(n.push(o),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};e.splitLines=kt;var wt=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return t&&t.parentElement()==e?0!=t.compareEndPoints("StartToEnd",t):!1};e.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),e.defineMIME("text/plain","null");var Mt={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};return e.keyNames=Mt,function(){for(var e=0;10>e;e++)Mt[e+48]=String(e);for(var e=65;90>=e;e++)Mt[e]=String.fromCharCode(e);for(var e=1;12>=e;e++)Mt[e+111]=Mt[e+63235]="F"+e}(),e.version="2.36",e});