"use strict";define(["css!./main.css"],function(){function e(r,t){var c="";return r.forEach(function(r,o){var l=t+"["+o+"]",u="";c+=n.replace(/\{it\}/g,l),r.children&&(u+=e(r.children,l+".children"),u=i.replace("{li}",u).replace("{it}",l)),c=c.replace(/\{child\}/,u)}),c}function r(e){var r={},i=[];return e.sort(function(e,r){return e.pid===r.pid?e.sort-r.sort:e.pid-r.pid}),e.forEach(function(e){r[e.id]=e,t[e.id]="";var n=r[e.pid];if(!n)return i.push(r[e.id]);t[e.id]+=t[n.id]+n.id+",",n.open=!!n.open,n.children=n.children||[],n.children.push(e)}),i}yua.ui.tree="1.0.0";var i='<ul :class="{open: {it}.open}">{li}</ul>',n='<li :class="{open: {it}.open, dir: {it}.children}"><em :click="$toggle({it})"></em><span :click="$select({it})" :class="{active: {it}.id === currItem}" :text="{it}.name"></span>{child}</li>',t={};return yua.component("tree",{$template:'<div class="do-tree" :class="{{$skin}}" :html="treeHTML"></div>',$init:function(i){i.$select=function(e){i.currItem=e.id,i.$onClick&&i.$onClick(e)},i.$reset=function(n){i.treeArr.clear(),i.treeHTML="",i.treeArr.pushArray(r(n)),i.currItem=-1;var t=e(i.treeArr.$model,"treeArr");yua.nextTick(function(){i.treeHTML="<ul>{li}</ul>".replace("{li}",t)})},i.$update=function(e,r){var n=t[e],c=null,o=null;for(n=(n+=e).split(",");c=+n.shift();){o=o?o.children:i.treeArr;for(var l,u=0;l=o[u++];)if(l.id===c){o=l;break}}for(var a in r)o[a]=r[a]}},$ready:function(e){e.$onSuccess(e)},$skin:"skin-def",treeHTML:"",currItem:-1,treeArr:[],$select:yua.noop,$update:yua.noop,$reset:yua.noop,$onSuccess:yua.noop,$onClick:yua.noop,$toggle:function(e){e.open=!e.open}})});